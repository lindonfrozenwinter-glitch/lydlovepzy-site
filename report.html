<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘ä»¬çš„ç”œèœœæ—¶å…‰ - ä¸€é”®æŠ¥å¤‡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Noto Serif SC', 'Inter', sans-serif;
        }
        
        .liquid-glass {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .romantic-gradient {
            background: linear-gradient(135deg, #FFB6C1 0%, #FFD700 50%, #FFA500 100%);
        }
        
        .sky-gradient {
            background: linear-gradient(135deg, #87CEEB 0%, #4682B4 50%, #191970 100%);
        }
        
        .dark-gradient {
            background: linear-gradient(135deg, #9370DB 0%, #4B0082 50%, #2F2F2F 100%);
        }
        
        .light-gradient {
            background: linear-gradient(135deg, #98FB98 0%, #32CD32 50%, #F5FFFA 100%);
        }
        
        .warm-gradient {
            background: linear-gradient(135deg, #FFA500 0%, #FF6347 50%, #FFF8DC 100%);
        }
        
        .floating-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .pulse-ring {
            animation: pulse-ring 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
        }
        
        @keyframes pulse-ring {
            0% {
                transform: scale(0.8);
                opacity: 1;
            }
            80%, 100% {
                transform: scale(1.2);
                opacity: 0;
            }
        }
        
        .pulse-dot {
            animation: pulse-dot 2s cubic-bezier(0.455, 0.03, 0.515, 0.955) infinite;
        }
        
        @keyframes pulse-dot {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .location-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .location-card:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }
        
        .nav-item {
            transition: all 0.3s ease;
            position: relative;
        }
        
        .nav-item:hover {
            transform: translateY(-2px);
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 30px;
            height: 3px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 2px;
        }
        
        .btn-bounce {
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        
        .btn-bounce:hover {
            transform: scale(1.05);
        }
        
        .btn-bounce:active {
            transform: scale(0.95);
        }
        
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .success-checkmark {
            animation: checkmark 0.6s ease-in-out;
        }
        
        @keyframes checkmark {
            0% { transform: scale(0) rotate(45deg); }
            50% { transform: scale(1.2) rotate(45deg); }
            100% { transform: scale(1) rotate(45deg); }
        }
    </style>
</head>
<body class="min-h-screen transition-all duration-1000 romantic-gradient">
    <!-- å¯¼èˆªæ  -->
    <nav class="fixed top-0 left-0 right-0 z-50 liquid-glass mx-4 mt-4 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <h1 class="text-2xl font-bold text-white">ğŸ’• æˆ‘ä»¬çš„ç”œèœœæ—¶å…‰</h1>
                <span id="currentUser" class="text-white/80 text-sm"></span>
            </div>
            
            <div class="flex items-center space-x-6">
                <a href="main.html" class="nav-item text-white hover:text-white/80 font-medium">é¦–é¡µ</a>
                <a href="write.html" class="nav-item text-white hover:text-white/80 font-medium">å†™æ—¥å¸¸</a>
                <a href="together.html" class="nav-item text-white hover:text-white/80 font-medium">æˆ‘ä»¬ä¸€èµ·åš</a>
                <a href="report.html" class="nav-item active text-white hover:text-white/80 font-medium">ä¸€é”®æŠ¥å¤‡</a>
                <button id="logoutBtn" class="text-white/80 hover:text-white transition-colors">é€€å‡º</button>
            </div>
        </div>
    </nav>
    
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main class="pt-24 pb-8 px-4">
        <div class="max-w-4xl mx-auto">
            <!-- æ ‡é¢˜åŒºåŸŸ -->
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-white mb-4 floating-animation">
                    ä¸€é”®æŠ¥å¤‡ä½ç½® ğŸ“
                </h2>
                <p class="text-white/80 text-lg">
                    è®©TAçŸ¥é“ä½ åœ¨å“ªé‡Œï¼Œå¤šä¸€ä»½å®‰å¿ƒï¼Œå¤šä¸€ä»½ç”œèœœ
                </p>
            </div>
            
            <!-- æŠ¥å¤‡æŒ‰é’®åŒºåŸŸ -->
            <div class="text-center mb-12">
                <div class="relative inline-block">
                    <!-- è„‰å†²ç¯æ•ˆæœ -->
                    <div class="absolute inset-0 rounded-full bg-white/20 pulse-ring"></div>
                    <div class="absolute inset-2 rounded-full bg-white/30 pulse-ring" style="animation-delay: 0.5s;"></div>
                    
                    <!-- ä¸»æŒ‰é’® -->
                    <button id="reportBtn" 
                            class="relative z-10 w-48 h-48 rounded-full bg-gradient-to-br from-pink-400 to-yellow-400 hover:from-pink-500 hover:to-yellow-500 text-white text-xl font-bold shadow-2xl btn-bounce pulse-dot">
                        <div class="flex flex-col items-center">
                            <div class="text-4xl mb-2">ğŸ“</div>
                            <div>ä¸€é”®æŠ¥å¤‡</div>
                            <div class="text-sm opacity-80 mt-1">ç‚¹å‡»è·å–ä½ç½®</div>
                        </div>
                    </button>
                </div>
                
                <div class="mt-6 text-white/70">
                    <p>ğŸ“± éœ€è¦è·å–æ‚¨çš„ä½ç½®ä¿¡æ¯</p>
                    <p class="text-sm mt-1">è¯·å…è®¸æµè§ˆå™¨è®¿é—®ä½ç½®æƒé™</p>
                </div>
            </div>
            
            <!-- ä½ç½®ä¿¡æ¯å±•ç¤ºåŒºåŸŸ -->
            <div id="locationInfo" class="hidden">
                <div class="liquid-glass p-6 mb-6">
                    <h3 class="text-2xl font-bold text-white mb-4 text-center">ğŸ“ ä½ç½®ä¿¡æ¯</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="location-card">
                            <div class="flex items-center space-x-3 mb-3">
                                <div class="text-2xl">ğŸ—ºï¸</div>
                                <h4 class="text-lg font-semibold text-white">å¤§è‡´ä½ç½®</h4>
                            </div>
                            <p id="generalLocation" class="text-white/80"></p>
                        </div>
                        
                        <div class="location-card">
                            <div class="flex items-center space-x-3 mb-3">
                                <div class="text-2xl">ğŸ“Œ</div>
                                <h4 class="text-lg font-semibold text-white">ç²¾ç¡®åæ ‡</h4>
                            </div>
                            <p id="coordinates" class="text-white/80 font-mono text-sm"></p>
                        </div>
                        
                        <div class="location-card">
                            <div class="flex items-center space-x-3 mb-3">
                                <div class="text-2xl">â°</div>
                                <h4 class="text-lg font-semibold text-white">æŠ¥å¤‡æ—¶é—´</h4>
                            </div>
                            <p id="reportTime" class="text-white/80"></p>
                        </div>
                        
                        <div class="location-card">
                            <div class="flex items-center space-x-3 mb-3">
                                <div class="text-2xl">ğŸ‘¤</div>
                                <h4 class="text-lg font-semibold text-white">æŠ¥å¤‡ç”¨æˆ·</h4>
                            </div>
                            <p id="reportUser" class="text-white/80"></p>
                        </div>
                    </div>
                    
                    <div class="mt-6 text-center">
                        <button id="confirmReportBtn" 
                                class="px-8 py-3 bg-gradient-to-r from-green-400 to-blue-400 hover:from-green-500 hover:to-blue-500 text-white rounded-lg btn-bounce">
                            ç¡®è®¤æŠ¥å¤‡ âœ…
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- å†å²æŠ¥å¤‡è®°å½• -->
            <div class="liquid-glass p-6">
                <h3 class="text-2xl font-bold text-white mb-6 text-center">ğŸ“‹ æŠ¥å¤‡å†å²</h3>
                
                <div id="reportHistory">
                    <div id="noReportsMessage" class="text-center py-8">
                        <div class="text-4xl mb-4">ğŸ“</div>
                        <p class="text-white/60">è¿˜æ²¡æœ‰æŠ¥å¤‡è®°å½•</p>
                        <p class="text-white/60 text-sm mt-1">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹ç¬¬ä¸€æ¬¡æŠ¥å¤‡</p>
                    </div>
                </div>
            </div>
            
            <!-- æ¸©é¦¨æç¤º -->
            <div class="mt-8 liquid-glass p-6">
                <h3 class="text-xl font-bold text-white mb-4">ğŸ’¡ æ¸©é¦¨æç¤º</h3>
                <div class="text-white/80 space-y-2">
                    <p>â€¢ æŠ¥å¤‡åŠŸèƒ½éœ€è¦è·å–æ‚¨çš„åœ°ç†ä½ç½®æƒé™</p>
                    <p>â€¢ å¦‚æœæ— æ³•è·å–ä½ç½®ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®æˆ–ç½‘ç»œè¿æ¥</p>
                    <p>â€¢ æŠ¥å¤‡ä¿¡æ¯ä¼šä»¥æ—¥å¸¸å½¢å¼å‘å¸ƒï¼Œä¸”ä¸å¯åˆ é™¤</p>
                    <p>â€¢ ä¸ºäº†ä¿æŠ¤éšç§ï¼Œè¯·è°¨æ…ä½¿ç”¨æ­¤åŠŸèƒ½</p>
                </div>
            </div>
        </div>
    </main>
    
    <!-- åŠ è½½ä¸­å¼¹çª— -->
    <div id="loadingModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center">
        <div class="liquid-glass p-8 text-center">
            <div class="loading-spinner text-4xl mb-4">ğŸŒ</div>
            <h3 class="text-xl font-bold text-white mb-2">æ­£åœ¨è·å–ä½ç½®...</h3>
            <p class="text-white/80">è¯·ç¨å€™ï¼Œæ­£åœ¨åŠªåŠ›å®šä½ä¸­...</p>
        </div>
    </div>
    
    <!-- æˆåŠŸæŠ¥å¤‡å¼¹çª— -->
    <div id="successModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center">
        <div class="liquid-glass p-8 max-w-md mx-4 text-center">
            <div class="text-6xl mb-4 success-checkmark">âœ…</div>
            <h3 class="text-2xl font-bold text-white mb-4">æŠ¥å¤‡æˆåŠŸï¼</h3>
            <p class="text-white/80 mb-6">ä½ çš„ä½ç½®ä¿¡æ¯å·²ç»æˆåŠŸæŠ¥å¤‡ï½</p>
            <div class="space-y-3">
                <button onclick="continueReport()" 
                        class="w-full py-3 px-6 bg-white/20 hover:bg-white/30 text-white rounded-lg btn-bounce">
                    ç»§ç»­æŠ¥å¤‡ ğŸ“
                </button>
                <button onclick="goToMain()" 
                        class="w-full py-3 px-6 bg-gradient-to-r from-pink-400 to-yellow-400 hover:from-pink-500 hover:to-yellow-500 text-white rounded-lg btn-bounce">
                    æŸ¥çœ‹ä¸»é¡µ ğŸ 
                </button>
            </div>
        </div>
    </div>
    
    <script>
        // å…¨å±€å˜é‡
        let currentUser = '';
        let userIdentity = '';
        let currentLocation = null;
        
        // ç”¨æˆ·é…ç½®
        const userConfig = {
            'æ—ç²¤å†¬': { identity: 'ç‹®ç‹' },
            'è’²æŒ¯å®‡': { identity: 'å°é±¼' }
        };
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            loadReportHistory();
            initializeEventListeners();
        });
        
        // åˆå§‹åŒ–åº”ç”¨
        function initializeApp() {
            currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                window.location.href = 'index.html';
                return;
            }
            
            userIdentity = userConfig[currentUser].identity;
            document.getElementById('currentUser').textContent = `${currentUser} (${userIdentity})`;
            
            // è®¾ç½®é¡µé¢é…è‰²
            const savedScheme = localStorage.getItem('colorScheme') || 'romantic';
            applyColorScheme(savedScheme);
        }
        
        // åº”ç”¨é…è‰²æ–¹æ¡ˆ
        function applyColorScheme(scheme) {
            const body = document.body;
            body.className = body.className.replace(/\b\w+-gradient\b/g, '');
            body.classList.add(`${scheme}-gradient`);
        }
        
        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initializeEventListeners() {
            // é€€å‡ºç™»å½•
            document.getElementById('logoutBtn').addEventListener('click', logout);
            
            // æŠ¥å¤‡æŒ‰é’®
            document.getElementById('reportBtn').addEventListener('click', getLocation);
            
            // ç¡®è®¤æŠ¥å¤‡æŒ‰é’®
            document.getElementById('confirmReportBtn').addEventListener('click', confirmReport);
        }
        
        // è·å–ä½ç½®ä¿¡æ¯
        function getLocation() {
            // æ˜¾ç¤ºåŠ è½½å¼¹çª—
            document.getElementById('loadingModal').classList.remove('hidden');
            
            if (!navigator.geolocation) {
                showError('æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†ä½ç½®åŠŸèƒ½');
                return;
            }
            
            navigator.geolocation.getCurrentPosition(
                handlePositionSuccess,
                handlePositionError,
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 300000
                }
            );
        }
        
        // å¤„ç†ä½ç½®è·å–æˆåŠŸ
        function handlePositionSuccess(position) {
            const { latitude, longitude, accuracy } = position.coords;
            
            currentLocation = {
                latitude,
                longitude,
                accuracy,
                timestamp: new Date().toISOString()
            };
            
            // éšè—åŠ è½½å¼¹çª—
            document.getElementById('loadingModal').classList.add('hidden');
            
            // æ˜¾ç¤ºä½ç½®ä¿¡æ¯
            displayLocationInfo();
            
            // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
            playLocationSound();
        }
        
        // å¤„ç†ä½ç½®è·å–å¤±è´¥
        function handlePositionError(error) {
            document.getElementById('loadingModal').classList.add('hidden');
            
            let errorMessage = '';
            switch (error.code) {
                case error.PERMISSION_DENIED:
                    errorMessage = 'ä½ç½®æƒé™è¢«æ‹’ç»ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®';
                    break;
                case error.POSITION_UNAVAILABLE:
                    errorMessage = 'ä½ç½®ä¿¡æ¯ä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥';
                    break;
                case error.TIMEOUT:
                    errorMessage = 'è·å–ä½ç½®è¶…æ—¶ï¼Œè¯·é‡è¯•';
                    break;
                default:
                    errorMessage = 'è·å–ä½ç½®å¤±è´¥ï¼Œè¯·é‡è¯•';
                    break;
            }
            
            showError(errorMessage);
        }
        
        // æ˜¾ç¤ºä½ç½®ä¿¡æ¯
        function displayLocationInfo() {
            const { latitude, longitude, accuracy, timestamp } = currentLocation;
            
            // æ ¼å¼åŒ–åœ°å€ï¼ˆè¿™é‡Œä½¿ç”¨ç®€å•çš„é€†åœ°ç†ç¼–ç æè¿°ï¼‰
            const generalLocation = `çº¬åº¦: ${latitude.toFixed(6)}Â°N, ç»åº¦: ${longitude.toFixed(6)}Â°E`;
            const coordinates = `${latitude.toFixed(8)}, ${longitude.toFixed(8)}`;
            const reportTime = new Date(timestamp).toLocaleString('zh-CN');
            
            // æ›´æ–°UI
            document.getElementById('generalLocation').textContent = generalLocation;
            document.getElementById('coordinates').textContent = coordinates;
            document.getElementById('reportTime').textContent = reportTime;
            document.getElementById('reportUser').textContent = `${currentUser} (${userIdentity})`;
            
            // æ˜¾ç¤ºä½ç½®ä¿¡æ¯åŒºåŸŸ
            document.getElementById('locationInfo').classList.remove('hidden');
            
            // æ»šåŠ¨åˆ°ä½ç½®ä¿¡æ¯åŒºåŸŸ
            document.getElementById('locationInfo').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'center' 
            });
            
            // æ·»åŠ æ˜¾ç¤ºåŠ¨ç”»
            anime({
                targets: '#locationInfo',
                opacity: [0, 1],
                translateY: [20, 0],
                duration: 600,
                easing: 'easeOutElastic(1, .8)'
            });
        }
        
        // ç¡®è®¤æŠ¥å¤‡
        function confirmReport() {
            if (!currentLocation) {
                showError('æ²¡æœ‰å¯ç”¨çš„ä½ç½®ä¿¡æ¯');
                return;
            }
            
            const { latitude, longitude, timestamp } = currentLocation;
            
            // åˆ›å»ºæŠ¥å¤‡æ—¥å¸¸
            const reportDaily = {
                id: Date.now(),
                sender: userIdentity,
                author: currentUser,
                title: 'æŠ¥å¤‡ä½ç½®',
                content: `ğŸ“ ä½ç½®æŠ¥å¤‡\n\nå¤§è‡´ä½ç½®ï¼šçº¬åº¦ ${latitude.toFixed(6)}Â°N, ç»åº¦ ${longitude.toFixed(6)}Â°E\n\nç²¾ç¡®åæ ‡ï¼š${latitude.toFixed(8)}, ${longitude.toFixed(8)}\n\næŠ¥å¤‡æ—¶é—´ï¼š${new Date(timestamp).toLocaleString('zh-CN')}`,
                date: timestamp,
                type: 'report'
            };
            
            // ä¿å­˜åˆ°æ—¥å¸¸åˆ—è¡¨
            const savedPosts = localStorage.getItem('dailyPosts');
            const dailyPosts = savedPosts ? JSON.parse(savedPosts) : [];
            dailyPosts.push(reportDaily);
            localStorage.setItem('dailyPosts', JSON.stringify(dailyPosts));
            
            // ä¿å­˜åˆ°æŠ¥å¤‡å†å²
            const savedReports = localStorage.getItem('reportHistory') || '[]';
            const reportHistory = JSON.parse(savedReports);
            reportHistory.unshift({
                id: reportDaily.id,
                user: currentUser,
                identity: userIdentity,
                location: currentLocation,
                timestamp: timestamp
            });
            localStorage.setItem('reportHistory', JSON.stringify(reportHistory));
            
            // æ˜¾ç¤ºæˆåŠŸå¼¹çª—
            showSuccessModal();
            
            // é‡ç½®çŠ¶æ€
            resetReportState();
            
            // åˆ·æ–°æŠ¥å¤‡å†å²
            loadReportHistory();
        }
        
        // åŠ è½½æŠ¥å¤‡å†å²
        function loadReportHistory() {
            const savedReports = localStorage.getItem('reportHistory') || '[]';
            const reportHistory = JSON.parse(savedReports);
            const reportHistoryContainer = document.getElementById('reportHistory');
            const noReportsMessage = document.getElementById('noReportsMessage');
            
            if (reportHistory.length === 0) {
                noReportsMessage.classList.remove('hidden');
                return;
            }
            
            noReportsMessage.classList.add('hidden');
            
            reportHistoryContainer.innerHTML = reportHistory.map(report => {
                const date = new Date(report.timestamp);
                const formattedDate = `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥ ${date.getHours()}:${date.getMinutes().toString().padStart(2, '0')}`;
                
                return `
                    <div class="location-card mb-4">
                        <div class="flex items-center justify-between mb-2">
                            <div class="flex items-center space-x-2">
                                <span class="text-lg">${report.identity === 'ç‹®ç‹' ? 'ğŸ¦' : 'ğŸŸ'}</span>
                                <span class="font-semibold text-white">${report.user} (${report.identity})</span>
                            </div>
                            <span class="text-white/60 text-sm">${formattedDate}</span>
                        </div>
                        <div class="text-white/80 text-sm">
                            <div>ğŸ“ çº¬åº¦: ${report.location.latitude.toFixed(6)}Â°N, ç»åº¦: ${report.location.longitude.toFixed(6)}Â°E</div>
                            <div class="mt-1">ğŸ¯ ç²¾åº¦: ${Math.round(report.location.accuracy)}ç±³</div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // é‡ç½®æŠ¥å¤‡çŠ¶æ€
        function resetReportState() {
            currentLocation = null;
            document.getElementById('locationInfo').classList.add('hidden');
            
            // é‡ç½®è¡¨å•
            document.getElementById('generalLocation').textContent = '';
            document.getElementById('coordinates').textContent = '';
            document.getElementById('reportTime').textContent = '';
            document.getElementById('reportUser').textContent = '';
        }
        
        // æ˜¾ç¤ºæˆåŠŸå¼¹çª—
        function showSuccessModal() {
            document.getElementById('successModal').classList.remove('hidden');
            
            anime({
                targets: '#successModal .liquid-glass',
                scale: [0.8, 1],
                opacity: [0, 1],
                duration: 600,
                easing: 'easeOutElastic(1, .8)'
            });
            
            // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
            playSuccessSound();
        }
        
        // ç»§ç»­æŠ¥å¤‡
        function continueReport() {
            document.getElementById('successModal').classList.add('hidden');
            resetReportState();
        }
        
        // è¿”å›ä¸»é¡µ
        function goToMain() {
            window.location.href = 'main.html';
        }
        
        // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        function showError(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-4 z-50 px-6 py-3 rounded-lg bg-red-500/80 text-white transform translate-x-full transition-transform duration-300';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // æ˜¾ç¤ºåŠ¨ç”»
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // éšè—åŠ¨ç”»
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }
        
        // æ’­æ”¾ä½ç½®è·å–éŸ³æ•ˆ
        function playLocationSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // æ’­æ”¾å®šä½éŸ³æ•ˆ
                const frequencies = [440, 554.37, 659.25]; // A4, C#5, E5
                
                frequencies.forEach((freq, index) => {
                    setTimeout(() => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                        oscillator.type = 'sine';
                        
                        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                        
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.3);
                    }, index * 100);
                });
            } catch (e) {
                console.log('Audio not supported');
            }
        }
        
        // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
        function playSuccessSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
                const notes = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
                
                notes.forEach((freq, index) => {
                    setTimeout(() => {
                        const oscillator = audioContext.createOscillator();
                        const gainNode = audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(audioContext.destination);
                        
                        oscillator.frequency.setValueAtTime(freq, audioContext.currentTime);
                        oscillator.type = 'sine';
                        
                        gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                        
                        oscillator.start(audioContext.currentTime);
                        oscillator.stop(audioContext.currentTime + 0.2);
                    }, index * 100);
                });
            } catch (e) {
                console.log('Audio not supported');
            }
        }
        
        // é€€å‡ºç™»å½•
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                localStorage.removeItem('currentUser');
                localStorage.removeItem('loginTime');
                window.location.href = 'index.html';
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„å…¥åœºåŠ¨ç”»
        anime({
            targets: '.liquid-glass',
            translateY: [50, 0],
            opacity: [0, 1],
            duration: 800,
            easing: 'easeOutElastic(1, .8)'
        });
        
        anime({
            targets: '#reportBtn',
            scale: [0.8, 1],
            opacity: [0, 1],
            duration: 1000,
            easing: 'easeOutElastic(1, .8)',
            delay: 300
        });
    </script>
</body>
</html>